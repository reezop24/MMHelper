<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Market Insight (FE)</title>
  <link rel="stylesheet" href="global.css" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .card { margin-top: 12px; }
    .meta { font-size: 12px; color: #9ab8e6; }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 1px solid #355a8f;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      font-weight: 700;
      background: #0a234a;
      color: #d7e7ff;
    }
    .pill.buy { border-color: #22695b; color: #9ff0cd; background: #0b2f2a; }
    .pill.sell { border-color: #7a3b3b; color: #ffd2d2; background: #3a1414; }
    .grid {
      margin-top: 10px;
      display: grid;
      gap: 10px;
      grid-template-columns: 1fr;
    }
    .profile-card {
      border: 1px solid rgba(95, 145, 215, 0.4);
      border-radius: 10px;
      background: rgba(8, 26, 55, 0.75);
      padding: 10px;
    }
    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .title { font-size: 14px; font-weight: 700; color: #e9f1ff; }
    .sub { font-size: 12px; color: #9ab8e6; }
    .levels {
      margin-top: 8px;
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }
    .level {
      border: 1px solid rgba(95, 145, 215, 0.35);
      border-radius: 8px;
      padding: 6px 8px;
      background: rgba(6, 20, 47, 0.85);
      font-size: 12px;
      color: #dce9ff;
    }
    .level.collected {
      border-color: rgba(34, 197, 94, 0.7);
      background: rgba(10, 45, 25, 0.75);
    }
    .lv-name { color: #9ab8e6; font-size: 11px; }
    .lv-price { font-weight: 700; }
    .price-hl { color: #7db7ff; font-weight: 800; }
    .price-warn { color: #ffd08c; font-weight: 800; }
    .price-bad { color: #ff9aa8; font-weight: 800; }
    .lv-collect {
      margin-top: 2px;
      font-size: 11px;
      color: #9ab8e6;
    }
    .level.collected .lv-collect {
      color: #86efac;
      font-weight: 700;
    }
    .lv-dist { font-size: 11px; color: #b9cff3; }
    .summary-list {
      margin: 8px 0 0;
      padding-left: 18px;
      color: #dce9ff;
      font-size: 13px;
      line-height: 1.45;
    }
    .warn {
      margin-top: 10px;
      border: 1px solid rgba(245, 158, 11, 0.5);
      border-radius: 8px;
      background: rgba(122, 59, 6, 0.2);
      color: #ffd08c;
      padding: 8px 10px;
      font-size: 12px;
    }
    .empty {
      color: #9ab8e6;
      font-size: 13px;
      margin-top: 4px;
    }
    .back-btn {
      margin-top: 12px;
      width: 100%;
      border: 1px solid #4f6f98;
      background: #10294f;
      color: #e6f0ff;
      border-radius: 9px;
      padding: 9px 12px;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <main class="page">
    <header class="hero">
      <img class="logo" src="logo.png" alt="MM HELPER Logo" />
      <h1>Market Insight (FE)</h1>
      <p>Ringkasan FE dari profile tersimpan. Keutamaan TF besar.</p>
    </header>

    <section class="card">
      <div class="row">
        <div class="title">Current FE Bias</div>
        <div id="biasPill" class="pill">Loading...</div>
      </div>
      <div id="meta" class="meta">Membaca profile...</div>
      <ul id="summaryList" class="summary-list"></ul>
      <div class="warn">
        Insight ini FE-only. Gunakan bersama struktur market dan risk plan.
      </div>
    </section>

    <section class="card">
      <div class="title">Profile Summary</div>
      <div id="profiles" class="grid"></div>
      <div id="empty" class="empty" style="display:none;">Belum ada profile FE yang lengkap.</div>
      <button id="backBtn" type="button" class="back-btn">Back</button>
    </section>
  </main>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="fibo-market-insight.js"></script>
</body>
</html>
